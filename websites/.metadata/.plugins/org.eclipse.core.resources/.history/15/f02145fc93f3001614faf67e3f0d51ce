var ctx = document.getElementById("ctx").getContext("2d");

var ctxWidth = 500;
var ctxHeight = 500;
var rtSpacing = 30;
var bottomSpacing = 10;
var topSpacing = 30;

var appleRed = "#FF0000";
var skyBlue = "#0000FF";
var grassGreen = "#00FF00";
var canaryYellow = "#FFFF00";
var myBlack = "#000000";
var myPink = "rgba(255, 102, 153, 0.5)";

var enemyList = {};

// player as an object
var player = {
	x : 300,
	spdX : 3,
	y : 300,
	spdY : 7,
	name : "P",
	font : '30px Arial',
	wallFont : '60px Arial',
	topBottomFont : '10px Arial',
	color : myPink,
	colorWall : appleRed,
	colorTopBottom : skyBlue
}; // end of player


// this is a "Constructor"
Enemy = function(id,passX,passY,spdX,spdY, passName, passFont,
				passWallFont, passTopBottomFont, passColor,
				passColorWall,passColorTopBottom) { 
	
	var enemy = {
		id : id,
		x : passX,
		spdX : spdX,
		y : passY,
		spdY : spdY,
		name : passName,
		font : passFont,
		wallFont : passWallFont,
		topBottomFont : passTopBottomFont,
		color : passColor,
		colorWall : passColorWall,
		colorTopBottom : passColorTopBottom
	};
	
	enemyList[id] = enemy;

}; // end of Enemy() constructor

getDistanceBetweenEntity = function (entity1,entity2){
	var dx = entity1.x - entity2.x;
	var dy = entity1.y - entity2.y;
	return Math.sqrt(dx*dx + dy*dy);
	
};

testCollisionEntity = function (entity1,entity2){
	
	var distance = getDistanceBetweenEntity(entity1,entity2);
	return distance < 50;
	
};

updateEntity = function(something) {
	var red =  Math.floor(Math.random() * (255 - 0));
	var green = Math.floor(Math.random() * (255 - 0));
	var blue = Math.floor(Math.random() * (255 - 0));

	something.x += something.spdX;
	something.y += something.spdY;

	//flips spdX if we hit either the left or the right sides
	if (something.x >= ctxWidth - rtSpacing || something.x <= 0) {// right side OR left side
		something.spdX *= -1;
		something.color = "rgba(" + red + "," + green + "," + blue + ",0.5)";
		something.font = something.wallFont;
	}

	// flip spdY if we hit either the ceiling OR the floor
	if (something.y >= ctxHeight - bottomSpacing || something.y <= topSpacing) {// || is a Boolean for "OR"
		something.spdY *= -1;
		something.color = "rgba(" + red + "," + green + "," + blue + ",0.5)";
		something.font = something.topBottomFont;
	}

};


drawEntity = function(something){
	ctx.font = something.font;
	ctx.fillStyle = something.color;
	ctx.fillText(something.name, something.x, something.y);	
};



update = function() {
	ctx.clearRect(0, 0, ctxWidth, ctxHeight);
	updateEntity(player);

	for (var key in enemyList) {
		updateEntity(enemyList[key]);
		//test for collision
		var isColliding = testCollisionEntity(player,enemyList[key]);
		if (isColliding){
			console.log('Colliding'); // game keeps running
			//alert('Collision!!!');
		} // end of if
	} // end of for

}; // end of update()

Enemy('E1', 70, 60, 2, 5, 'E01','30px Arial','60px Arial',
'10px Arial',myBlack,grassGreen,appleRed);

Enemy('E2', 80, 50, 3, 4, 'E02', '60px Arial','30px Arial',
'15px Arial',grassGreen,myBlack,appleRed);

Enemy('E3', 75, 50, 3, 7, 'E03','20px Arial','80px Arial',
'20px Arial',appleRed,grassGreen,myBlack);

setInterval(update, 100);
